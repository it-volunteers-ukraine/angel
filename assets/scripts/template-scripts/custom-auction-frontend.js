!function(a){"use strict";var t=!1,e=SA_Ajax.ajaxurl,i=SA_Ajax.last_activity,n=!0,r="";function o(){var a=jQuery(this).data("auctionid"),t=jQuery(this).hasClass("future")?"true":"false",i=jQuery(this).parent().next(".auction-ajax-change");0==i.length&&(i=jQuery(".auction_form[data-product_id='"+a+"']")),i.hide(),jQuery('<div class="ajax-working"></div>').insertBefore(i),i.parent().children("form.buy-now").hide();var n=e+"=finish_auction";jQuery(document.body).trigger("sa-close-auction",[a]);jQuery.ajax({type:"post",url:n,cache:!1,data:{action:"finish_auction",post_id:a,ret:i.length,future:t},success:function(t){t?"closed"==t.status?(i.parent().children("form.buy-now").remove(),t.message&&(jQuery(".ajax-working").remove(),jQuery(".main-auction.auction-time-countdown[data-auctionid="+a+"]").parent().remove(),i.empty().prepend(t.message).wrap("<div></div>"),i.show(),jQuery(document.body).trigger("sa-action-closed",[a]))):"running"==t.status?(u(),jQuery(".ajax-working").remove(),i.show(),i.parent().children("form.buy-now").show()):location.reload():location.reload()},error:function(){location.reload()}})}function u(){var a;if(!(jQuery(".auction-price").length<1)&&1!=t){t=!0;var n=e+"=get_price_for_auctions";jQuery.ajax({type:"post",encoding:"UTF-8",url:n,dataType:"json",data:{action:"get_price_for_auctions",last_activity:i},success:function(e){null!=e&&(void 0!==e.last_activity&&(i=e.last_activity),jQuery.each(e,(function(t,e){if(jQuery("body").find(".auction-price[data-auction-id='"+t+"']").replaceWith(e.curent_bid),jQuery("body").find("[data-auction-id='"+t+"']").addClass("changed blink").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100,(function(){jQuery(this).removeClass("blink")})),void 0!==e.timer){var i=jQuery("body").find(".auction-time-countdown[data-auctionid='"+t+"']");i.attr("data-time")!=e.timer&&(i.attr("data-time",e.timer),a=jQuery(" body").hasClass("logged-in")?e.timer:jQuery.SAcountdown.UTCDate(-(new Date).getTimezoneOffset(),new Date(1e3*e.timer)),i.SAcountdown("option","until",a),i.addClass("changed blink").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100,(function(){jQuery(this).removeClass("blink")})))}if(void 0!==e.curent_bider){var n=jQuery("input[name=user_id]"),r=jQuery("input[name=place-bid]").val();n.length&&e.curent_bider!=n.val()&&r==t&&(jQuery('.woocommerce-message:contains("'+data.no_need+'")').replaceWith(data.outbid_message),jQuery(".reserve_not_meet[data-auction-id='"+t+"']").parent().remove()),jQuery("span.winning[data-auction_id='"+t+"']").attr("data-user_id")!=e.curent_bider&&(jQuery(document.body).trigger("sa-action-removing-winning-badge",[jQuery("span.winning[data-auction_id='"+t+"']"),t,e]),jQuery("span.winning[data-auction_id='"+t+"']").remove())}void 0!==e.bid_value&&(jQuery("input[name=bid_value][data-auction-id='"+t+"']").hasClass("changedin")||(jQuery("input[name=bid_value][data-auction-id='"+t+"']").val(e.bid_value).attr("value",e.bid_value).removeClass("changedin"),jQuery("input[name=bid_value][data-auction-id='"+t+"']").autoNumeric("set",e.bid_value))),void 0!==e.reserve&&jQuery(".auction-ajax-change .reserve[data-auction-id='"+t+"']").text(e.reserve),void 0!==e.activity&&(jQuery("#auction-history-table-"+t+" tbody > tr:first").before(e.activity),jQuery("#auction-history-table-"+t+" tbody > tr:first").addClass("changed blink").fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100).fadeOut(100).fadeIn(100,(function(){jQuery(this).removeClass("blink")}))),void 0!==e.add_to_cart_text&&jQuery("a.button.product_type_auction[data-product_id='"+t+"']").text(e.add_to_cart_text),jQuery(document.body).trigger("sa-action-price-changed",[t,e])}))),jQuery(document.body).trigger("sa-action-price-respons",e),t=!1},error:function(){t=!1}})}}function d(a,t=autoNumericdata.decimalPlacesOverride,e=autoNumericdata.decimalCharacter,i=autoNumericdata.digitGroupSeparator){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+a)?+a:0,r=isFinite(+t)?Math.abs(t):0,o=void 0===i?",":i,u=void 0===e?".":e,d="";return d=(r?function(a,t){var e=Math.pow(10,t);return""+Math.round(a*e)/e}(n,r):""+Math.round(n)).split("."),d[0].length>3&&(d[0]=d[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(d[1]||"").length<r&&(d[1]=d[1]||"",d[1]+=new Array(r-d[1].length+1).join("0")),d.join(u)}jQuery(document).ready((function(a){if(data.interval&&("yes"==SA_Ajax.focus&&(a(window).focus((function(){n=!0})),a(window).blur((function(){n=!1}))),r=setInterval((function(){1==n&&u()}),1e3*data.interval)),a(".auction-time-countdown").each((function(t){var e=a(this).data("time"),i=a(this).data("format"),n=!1;""==i&&(i="yowdHMS"),n="yes"==data.compact_counter;var r="";if(a(this).hasClass("future"))r='<div class="started">'+data.started+"</div>";else r='<div class="over">'+data.checking+"</div>";a(this).SAcountdown({until:e,format:i,compact:n,onExpiry:o,expiryText:r})})),a(".auction-time-countdown-compact").each((function(t,e){var i=a(this).data("time"),n=a(this).data("format");jQuery(e).siblings(".recent-bids-list-item-datum-inner-placeholder");""==n&&(n="yowdHMS");var r="";if(a(this).hasClass("future"))r='<div class="started">'+data.started+"</div>";else r='<div class="over">'+data.checking+"</div>";a(" body").hasClass("logged-in")||(i=a.SAcountdown.UTCDate(-(new Date).getTimezoneOffset(),new Date(1e3*i))),a(this).SAcountdown({until:i,format:n,compact:!0,onExpiry:o,expiryText:r})})),a("form.cart").submit((function(){clearInterval(r)})),a("input[name=bid_value]").on("changein",(function(t){a(this).addClass("changein")})),a(".sealed-text a").on("click",(function(t){t.preventDefault(),a(".sealed-bid-desc").slideToggle("fast")})),a(".sa-watchlist-action").on("click",(function t(e){var i=jQuery(this).data("auction-id"),n=a(this);e.preventDefault(),jQuery.ajax({type:"get",url:SA_Ajax.ajaxurl,data:{post_id:i,"wsa-ajax":"watchlist"},success:function(e){n.parent().replaceWith(e);a(".sa-watchlist-action").off("click").on("click",t),jQuery(document.body).trigger("sa-wachlist-action",[e,i])}})})),jQuery().autoNumeric){a(".auction_form .qty").autoNumeric("init",{unformatOnSubmit:!0,digitGroupSeparator:autoNumericdata.digitGroupSeparator,decimalCharacter:autoNumericdata.decimalCharacter,currencySymbol:autoNumericdata.currencySymbol,currencySymbolPlacement:autoNumericdata.currencySymbolPlacement,decimalPlacesOverride:autoNumericdata.decimalPlacesOverride,showWarnings:!1});jQuery(".auction_form div.quantity.buttons_added").off("click"),jQuery(document).on("click",".auction_form .plus,.auction_form .minus",(function(){var t=jQuery(this).closest(".quantity").find("input[name=bid_value]"),e=parseFloat(jQuery(this).parents(".auction_form").find(".qty").autoNumeric("get")),i=parseFloat(t.attr("max")),n=parseFloat(t.attr("min")),r=t.attr("step");e&&""!==e&&"NaN"!==e||(e=0),(""===i||"NaN"===i)&&(i=""),(""===n||"NaN"===n)&&(n=0),("any"===r||""===r||void 0===r||"NaN"===parseFloat(r))&&(r=1),jQuery(this).is(".plus")?t.val(d(i&&(i==e||e>i)?i:e+parseFloat(r))):n&&(n==e||n>e)?t.val(d(n)):e>0&&t.val(d(e-parseFloat(r))),t.trigger("change"),a(".auction_form .qty").autoNumeric("update")}))}a(document).on("touchend",".recent-bids-list-item a",(function(t){a(this).data("touched",!0)})).on("mouseenter",".recent-bids-list-item",(function(t){var e=a(this);if(!e.find("a").data("touched")){a(".recent-bids-list-item").removeClass("recent-bids-list-item-active"),e.addClass("recent-bids-list-item-active");var i=a(this).data("auction_id");a('.recent-bids-image-link[data-auction_id="'+i+'"]').remove().prependTo(".recent-bids-image-links").show()}}))}))}(jQuery);